function removeNoJs(){jQuery("body").removeClass("no-js")}function pinFooter(){var e=window.innerHeight;jQuery(".site-container").height()<e?jQuery(".site-footer").addClass("site-footer--pinned"):jQuery(".site-footer").removeClass("site-footer--pinned")}function subMenuContainer(){jQuery(".menu-primary .menu-item-33").find(".sub-menu").prepend('<span id="sub-menu-right" class="sub-menu-arrow sub-menu-arrow--r">&gt;</span>')}function slideSubMenu_r(){jQuery("#sub-menu-right").on("click",function(){var e=window.innerWidth;jQuery(this).closest(".sub-menu").css("left","auto").animate({right:e},300),console.log("clicked")})}function subMenuReset(){jQuery(".menu-primary .menu-item-33").find(".sub-menu").css("left","0").css("right","0")}function sourceList(){var e=jQuery(".single-source #source-list-container").height(),n=jQuery(".single-source #source-copy");window.innerWidth>1024?n.css("min-height",e+30):n.removeAttr("style")}function showHide(){jQuery("#toggle-transcript").on("click",function(e){e.preventDefault(),jQuery("#source-transcript-container").slideToggle(),jQuery("html, body").animate({scrollTop:jQuery("#source-transcript-container").offset().top},"slow")})}function seeDiscussion(){jQuery("#see-discussion__cta").on("click",function(){jQuery("html, body").animate({scrollTop:jQuery("#source-discussion-points").offset().top},"slow")})}function compareHeight(){jQuery("#source-copy").height()>jQuery("#source-list-container").height()?jQuery("#source-copy").addClass("mb40"):jQuery("#source-copy").removeClass("mb40")}function sourceListCurrent(){var e=jQuery("#current-source-list-item").val();jQuery(".source-list__item").each(function(n){jQuery(this).index()==e&&jQuery(".entry").hasClass("category-town-planning")?jQuery(this).addClass("source-list__item--current"):jQuery(this).index()!=e-1||jQuery(".entry").hasClass("category-town-planning")||jQuery(this).addClass("source-list__item--current")})}function toggleInteractiveModal(){jQuery(".source-list__lnk--interactive").not(".source-list__lnk--gallery").on("click",function(e){e.preventDefault(),jQuery("#interactive-modal").animate({left:"0",right:"0"},600),jQuery("#interactive-modal__close").focus()})}function closeModal(){jQuery("#interactive-modal__close").on("click",function(e){e.preventDefault(),jQuery("#interactive-modal").animate({left:"-5000px",right:"5000px"},600)}),jQuery(document).on("keyup",function(e){27==e.keyCode&&jQuery("#interactive-modal").animate({left:"-5000px",right:"5000px"},600)})}function slideCaptionTouch(){jQuery(".landing-banner__toggle-decript").on("click",function(){if(whatInput.ask(),"touch"===whatInput.ask()){var e=jQuery(this);e.hasClass("closed")?(jQuery(".landing-banner__caption").animate({left:"0"},500),e.text("Hide image description"),e.removeClass("closed").addClass("open")):(jQuery(".landing-banner__caption").animate({left:"-395px"},500),e.text("View image description"),e.removeClass("open").addClass("closed"))}})}function slideCaption(){jQuery(".landing-banner").on("mouseover focus",function(){whatInput.ask(),"mouse"!==whatInput.ask()&&"keyboard"!==whatInput.ask()||jQuery(this).find(".landing-banner__caption").animate({left:"0"},500)}),jQuery(".landing-banner").on("mouseleave blur",function(){whatInput.ask(),"mouse"!==whatInput.ask()&&"keyboard"!==whatInput.ask()||jQuery(this).find(".landing-banner__caption").animate({left:"-395px"},300)})}function slidePersonCaption(){jQuery(".key-people-thumbs__item > img").on("click",function(){jQuery(".key-people-thumbs__item").find(".key-people-thumbs__item__caption").css("left","-260px"),jQuery(this).closest(".key-people-thumbs__item").hasClass("closed")?(jQuery(this).siblings(".key-people-thumbs__item__caption").animate({left:"0"},200),jQuery(this).closest(".key-people-thumbs__item").removeClass("closed").addClass("open")):(jQuery(this).siblings(".key-people-thumbs__item__caption").animate({left:"-260px"},200),jQuery(this).closest(".key-people-thumbs__item").removeClass("open").addClass("closed"))})}function relocateSourceList(){var e=jQuery(".page-template-encyclopaedia .landing-copy"),n=jQuery(".page-template-encyclopaedia #source-list-container");jQuery(".page-template-encyclopaedia .landing-copy #source-list-container").length<1&&window.innerWidth>1024?e.prepend(n):jQuery(".page-template-encyclopaedia .landing-copy #source-list-container").length>0&&window.innerWidth<=1024&&n.insertAfter(e)}function makeVisible(){jQuery(".landing-banner__img__item").each(function(e,n){n.complete?jQuery(this).closest(".landing-banner__img").addClass("fade-out"):jQuery(this).on("load",function(){jQuery(this).closest(".landing-banner__img").addClass("fade-out")})})}jQuery(document).ready(function(){removeNoJs(),sourceList(),pinFooter(),showHide(),compareHeight(),sourceListCurrent(),slideCaption(),slideCaptionTouch(),slidePersonCaption(),relocateSourceList(),makeVisible(),seeDiscussion(),toggleInteractiveModal(),closeModal()}),jQuery(window).on("load",function(){}),jQuery(window).on("resize",function(){sourceList(),subMenuReset(),pinFooter(),compareHeight(),relocateSourceList()});